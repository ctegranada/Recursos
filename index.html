<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Recursos Compartidos</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 30px 20px;
      color: #333;
    }
    header {
      max-width: 900px;
      margin: auto;
      text-align: center;
    }
    header img {
      max-width: 650px;
      width: 100%;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 900px;
      margin: 20px auto;
    }
    .top-bar h2 {
      margin: 0;
    }

    .login-btn {
      cursor: pointer;
      font-size: 22px;
    }

    .recursos {
      max-width: 900px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 20px;
    }

    .recurso {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .recurso h3 {
      margin: 0;
      color: #2c3e50;
      font-size: 18px;
    }

    .recurso small {
      color: #777;
    }

    .recurso a {
      margin-top: auto;
      text-decoration: none;
      background: #2c7be5;
      color: #fff;
      padding: 10px;
      text-align: center;
      border-radius: 6px;
      transition: 0.2s;
    }

    .recurso a:hover {
      background: #1a5fc4;
    }

    .loading {
      text-align: center;
      margin-top: 40px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<header>
  <img src="https://i.imgur.com/qDoAAWT.png" alt="Logo">
</header>

<div class="top-bar">
  <h2>Recursos compartidos</h2>
  <div class="login-btn" title="Acceso privado" onclick="irPrivado()">ðŸ”‘</div>
</div>

<div id="estado" class="loading">Cargando recursos...</div>

<div id="contenedorRecursos" class="recursos"></div>

<script>
const ENDPOINT = 'https://script.google.com/macros/s/XXXXX/exec?action=recursos';

function irPrivado() {
  window.location.href =
    'https://script.google.com/macros/s/AKfycbz77ePpzPQe1EX9MbFawBxG0qMyYBjQU9f1cTx-fHMrunqjdvUKfdivAIyCqSBC_2Dp/exec?page=login';
  /* ?action=recursos / ?page=entidades / ?page=panel */
}

fetch(ENDPOINT)
  .then(r => r.json())
  .then(data => pintarRecursos(data))
  .catch(() => {
    document.getElementById('estado').textContent =
      'No se han podido cargar los recursos.';
  });

function pintarRecursos(recursos) {
  const cont = document.getElementById('contenedorRecursos');
  const estado = document.getElementById('estado');
  estado.style.display = 'none';

  if (!recursos.length) {
    estado.style.display = 'block';
    estado.textContent = 'No hay recursos disponibles.';
    return;
  }

  recursos.forEach(r => {
    const div = document.createElement('div');
    div.className = 'recurso';

    div.innerHTML = `
      <h3>${r.titulo}</h3>
      <small>${r.entidad} Â· ${r.categoria}</small>
      <p>${r.descripcion}</p>
      <a href="${r.url}" target="_blank">Acceder al recurso</a>
    `;

    cont.appendChild(div);
  });
}
</script>

</body>
</html>
